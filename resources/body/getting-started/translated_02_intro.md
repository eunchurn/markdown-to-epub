---
title: OpenSearch 소개
---

OpenSearch는 웹사이트에 검색 상자를 구현하는 것부터 보안 데이터 분석을 통한 위협 감지에 이르기까지 다양한 사용 사례를 지원하는 분산형 검색 및 분석 엔진입니다. 분산형이라는 용어는 OpenSearch를 여러 컴퓨터에서 실행할 수 있음을 의미합니다. 검색 및 분석은 데이터를 OpenSearch에 삽입한 후 검색하고 분석할 수 있음을 의미합니다. 데이터의 유형에 관계없이 OpenSearch를 사용하여 데이터를 저장하고 분석할 수 있습니다.

### 문서

*문서*는 정보를 저장하는 단위로, 텍스트 또는 구조화된 데이터를 저장합니다. OpenSearch에서는 문서가 JSON 형식으로 저장됩니다.

문서를 여러 가지 방식으로 생각할 수 있습니다:

- 학생 데이터베이스에서 문서는 한 명의 학생을 나타낼 수 있습니다.
- 정보를 검색할 때, OpenSearch는 검색과 관련된 문서를 반환합니다.
- 문서는 전통적인 데이터베이스의 행을 나타냅니다.

예를 들어, 학교 데이터베이스에서 문서는 한 명의 학생을 나타내며 다음과 같은 데이터를 포함할 수 있습니다.

| ID  | 이름  | GPA  | 졸업 연도 |
| --- | ---- | ---- | --------- |
| 1   | John Doe | 3.89 | 2022 |

이 문서를 JSON 형식으로 나타내면 다음과 같습니다:

```json
{
  "name": "John Doe",
  "gpa": 3.89,
  "grad_year": 2022
}
```

문서 ID가 어떻게 할당되는지에 대해서는 [문서 색인화](https://opensearch.org/docs/latest/getting-started/communicate/#indexing-documents)에서 배울 수 있습니다.

### 색인

*색인*은 문서의 모음입니다.

색인을 여러 가지 방식으로 생각할 수 있습니다:

- 학생 데이터베이스에서 색인은 데이터베이스의 모든 학생을 나타낼 수 있습니다.
- 정보를 검색할 때, 색인에 포함된 데이터를 쿼리합니다.
- 색인은 전통적인 데이터베이스의 테이블을 나타냅니다.

예를 들어, 학교 데이터베이스에서 색인은 학교의 모든 학생을 포함할 수 있습니다.

| ID  | 이름      | GPA  | 졸업 연도 |
| --- | --------- | ---- | --------- |
| 1   | John Doe  | 3.89 | 2022      |
| 2   | Jane Doe  | 3.95 | 2023      |

### 인덱싱

*인덱싱*은 문서를 색인에 추가하는 과정입니다. OpenSearch에서는 문서를 색인에 추가하면 색인에 포함된 모든 필드에 대해 검색할 수 있게 됩니다.

인덱싱 작업의 주요 단계는 다음과 같습니다:

1. 문서를 JSON 형식으로 변환합니다.
2. 문서를 색인에 추가합니다.
3. 문서가 색인에 추가되면, 검색에 사용할 수 있게 됩니다.

예를 들어, 다음은 OpenSearch에 문서를 인덱싱하는 예입니다:

```json
POST /students/_doc/1
{
  "name": "John Doe",
  "gpa": 3.89,
  "grad_year": 2022
}
```

이 명령은 "students" 색인에 ID가 1인 문서를 추가합니다.

### 트랜스로그

트랜스로그는 인덱싱 또는 벌크 호출이 문서를 트랜스로그에 기록하고 디스크에 플러시될 때 응답합니다. 이렇게 하면 업데이트가 지속됩니다. 업데이트는 [리프레시](#리프레시) 작업 후에만 검색 요청에 표시됩니다.

### 리프레시

OpenSearch는 주기적으로 *리프레시* 작업을 수행하여, 메모리 내 Lucene 인덱스에서 파일로 문서를 기록합니다. 이러한 파일은 `fsync`가 수행되지 않기 때문에 내구성이 보장되지 않습니다. 리프레시는 문서를 검색 가능하게 만듭니다.

### 플러시

*플러시* 작업은 `fsync`를 사용하여 파일을 디스크에 지속시켜 내구성을 보장합니다. 플러시는 트랜스로그에만 저장된 데이터를 Lucene 인덱스에 기록합니다. OpenSearch는 트랜스로그가 너무 커지지 않도록 필요한 경우 플러시를 수행합니다.

### 병합

OpenSearch에서 샤드는 Lucene 인덱스로, 이는 *세그먼트*(또는 세그먼트 파일)로 구성됩니다. 세그먼트는 인덱싱된 데이터를 저장하며 변경할 수 없습니다. 주기적으로 작은 세그먼트가 더 큰 세그먼트로 병합됩니다. 병합은 각 샤드의 전체 세그먼트 수를 줄이고, 디스크 공간을 확보하며, 검색 성능을 향상시킵니다. 결국 세그먼트는 병합 정책에서 지정된 최대 크기에 도달하며 더 이상 큰 세그먼트로 병합되지 않습니다. 병합 정책은 병합이 얼마나 자주 수행되는지도 지정합니다.

---

이 내용들을 바탕으로 OpenSearch를 효과적으로 활용할 수 있습니다. 더 많은 정보는 OpenSearch 공식 문서를 참고하세요.
